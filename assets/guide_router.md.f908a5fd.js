import{_ as s,c as a,o as n,a as e}from"./app.3de0d48f.js";const h=JSON.parse('{"title":"Router & Nav","description":"","frontmatter":{},"headers":[{"level":2,"title":"Config","slug":"config","link":"#config","children":[]},{"level":2,"title":"Nested Routes","slug":"nested-routes","link":"#nested-routes","children":[]},{"level":2,"title":"Navigation Drawer","slug":"navigation-drawer","link":"#navigation-drawer","children":[]},{"level":2,"title":"Layout","slug":"layout","link":"#layout","children":[]}],"relativePath":"guide/router.md","lastUpdated":1662544677000}'),o={name:"guide/router.md"},l=e(`<h1 id="router-nav" tabindex="-1">Router &amp; Nav <a class="header-anchor" href="#router-nav" aria-hidden="true">#</a></h1><p>Router and Nav are the key skeleton for organizing an admin system.</p><p>In this project routes and nav are bound together while routes are auto-generated by <a href="https://github.com/hannoeru/vite-plugin-pages" target="_blank" rel="noreferrer"><code>vite-plugin-pages</code></a> according to your file system, so you only have to put the page components in <code>@/pages</code> folder and then the routes, navigation sidebar and breadcrumbs will be generated automatically. This greatly reduces the workload of manually editing the navigation drawer. Of course, you need to follow some conventions in configuring the route.</p><h2 id="config" tabindex="-1">Config <a class="header-anchor" href="#config" aria-hidden="true">#</a></h2><p>First let us know the meta to configure route. Add more types in <a href="https://github.com/kingyue737/vitify-admin/blob/main/src/route-meta.d.ts" target="_blank" rel="noreferrer">route-meta.d.ts</a> if you need more route meta.</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#CB7676;">declare</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">module</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">vue-router</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">interface</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">RouteMeta</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">icon</span><span style="color:#CB7676;">?</span><span style="color:#666666;">: </span><span style="color:#5DA9A7;">string</span><span style="color:#666666;">                       </span><span style="color:#758575DD;">// drawer item icon</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">drawerGroup</span><span style="color:#CB7676;">?</span><span style="color:#666666;">: </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">admin</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;"> | </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">PUC</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">       </span><span style="color:#758575DD;">// groups are separated by line in drawer</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">drawerIndex</span><span style="color:#CB7676;">?</span><span style="color:#666666;">: </span><span style="color:#5DA9A7;">number</span><span style="color:#666666;">                </span><span style="color:#758575DD;">// determine the order of item in drawer</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">title</span><span style="color:#CB7676;">?</span><span style="color:#666666;">: </span><span style="color:#5DA9A7;">string</span><span style="color:#666666;">                      </span><span style="color:#758575DD;">// drawer item and breadcrumb text</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">subtitle</span><span style="color:#CB7676;">?</span><span style="color:#666666;">: </span><span style="color:#5DA9A7;">string</span><span style="color:#666666;">                   </span><span style="color:#758575DD;">// subtitle in drawer item</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">roles</span><span style="color:#CB7676;">?</span><span style="color:#666666;">: </span><span style="color:#5DA9A7;">Role</span><span style="color:#666666;">[]                      </span><span style="color:#758575DD;">// authorized user groups</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">dataCy</span><span style="color:#CB7676;">?</span><span style="color:#666666;">: </span><span style="color:#5DA9A7;">string</span><span style="color:#666666;">                     </span><span style="color:#758575DD;">// for cypress location</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">hidden</span><span style="color:#CB7676;">?</span><span style="color:#666666;">: </span><span style="color:#5DA9A7;">boolean</span><span style="color:#666666;">                    </span><span style="color:#758575DD;">// hide this route in drawer if truthy</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">breadcrumb</span><span style="color:#CB7676;">?</span><span style="color:#666666;">: </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">hidden</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;"> | </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">disabled</span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#666666;">  </span><span style="color:#758575DD;">// default is enabled</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#AB5959;">declare</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">module</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">vue-router</span><span style="color:#B56959AA;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">interface</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">RouteMeta</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">icon</span><span style="color:#AB5959;">?</span><span style="color:#999999;">: </span><span style="color:#2E808F;">string</span><span style="color:#999999;">                       </span><span style="color:#A0ADA0;">// drawer item icon</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">drawerGroup</span><span style="color:#AB5959;">?</span><span style="color:#999999;">: </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">admin</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;"> | </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">PUC</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">       </span><span style="color:#A0ADA0;">// groups are separated by line in drawer</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">drawerIndex</span><span style="color:#AB5959;">?</span><span style="color:#999999;">: </span><span style="color:#2E808F;">number</span><span style="color:#999999;">                </span><span style="color:#A0ADA0;">// determine the order of item in drawer</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">title</span><span style="color:#AB5959;">?</span><span style="color:#999999;">: </span><span style="color:#2E808F;">string</span><span style="color:#999999;">                      </span><span style="color:#A0ADA0;">// drawer item and breadcrumb text</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">subtitle</span><span style="color:#AB5959;">?</span><span style="color:#999999;">: </span><span style="color:#2E808F;">string</span><span style="color:#999999;">                   </span><span style="color:#A0ADA0;">// subtitle in drawer item</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">roles</span><span style="color:#AB5959;">?</span><span style="color:#999999;">: </span><span style="color:#2E808F;">Role</span><span style="color:#999999;">[]                      </span><span style="color:#A0ADA0;">// authorized user groups</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">dataCy</span><span style="color:#AB5959;">?</span><span style="color:#999999;">: </span><span style="color:#2E808F;">string</span><span style="color:#999999;">                     </span><span style="color:#A0ADA0;">// for cypress location</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">hidden</span><span style="color:#AB5959;">?</span><span style="color:#999999;">: </span><span style="color:#2E808F;">boolean</span><span style="color:#999999;">                    </span><span style="color:#A0ADA0;">// hide this route in drawer if truthy</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">breadcrumb</span><span style="color:#AB5959;">?</span><span style="color:#999999;">: </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">hidden</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;"> | </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">disabled</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// default is enabled</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-hidden="true">#</a></h4><div class="language-html"><button class="copy"></button><span class="lang">html</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#666666;">&lt;</span><span style="color:#FDAEB7;">route</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">lang</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">json</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  &quot;meta&quot;: {</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    &quot;title&quot;: &quot;userManagement&quot;,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    &quot;icon&quot;: &quot;$mdi-account-group&quot;,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    &quot;roles&quot;: [&quot;admin&quot;],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    &quot;drawerGroup&quot;: &quot;admin&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  }</span></span>
<span class="line"><span style="color:#DBD7CAEE;">}</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#FDAEB7;">route</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#999999;">&lt;</span><span style="color:#B31D28;">route</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">lang</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">json</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">{</span></span>
<span class="line"><span style="color:#393A34;">  &quot;meta&quot;: {</span></span>
<span class="line"><span style="color:#393A34;">    &quot;title&quot;: &quot;userManagement&quot;,</span></span>
<span class="line"><span style="color:#393A34;">    &quot;icon&quot;: &quot;$mdi-account-group&quot;,</span></span>
<span class="line"><span style="color:#393A34;">    &quot;roles&quot;: [&quot;admin&quot;],</span></span>
<span class="line"><span style="color:#393A34;">    &quot;drawerGroup&quot;: &quot;admin&quot;</span></span>
<span class="line"><span style="color:#393A34;">  }</span></span>
<span class="line"><span style="color:#393A34;">}</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#B31D28;">route</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="nested-routes" tabindex="-1">Nested Routes <a class="header-anchor" href="#nested-routes" aria-hidden="true">#</a></h2><p>If you have a nested route, such as <code>@/pages/nested</code>, Don&#39;t forget to manually add a <a href="https://github.com/kingyue737/vitify-admin/blob/main/src/components/layout/RouterWrapper.vue" target="_blank" rel="noreferrer"><code>&lt;RouterWrapper /&gt;</code></a> which contains a <code>&lt;router-view /&gt;</code> to the parent file with the same name as the secondary directory. You can refer to the <a href="https://github.com/kingyue737/vitify-admin/tree/main/src/pages/nested" target="_blank" rel="noreferrer">example</a> in this template.</p><p>Adding <code>&lt;RouterWrapper /&gt;</code> for every nested route parent is a little tedious. This can be avoid with the <a href="https://github.com/vuejs/router/commit/e07c46938d0cc2ca2bc2b1d07fd543465121b60a" target="_blank" rel="noreferrer">new feature</a> in Vue Router v4.1 which, however, requires Vue 3 \u{1F612}.</p><h2 id="navigation-drawer" tabindex="-1">Navigation Drawer <a class="header-anchor" href="#navigation-drawer" aria-hidden="true">#</a></h2><p>The navigation drawer is mainly based on <a href="https://vuetifyjs.com/en/components/navigation-drawers/" target="_blank" rel="noreferrer"><code>v-navigation-drawer</code></a> of Vuetify.</p><p>Also introduced in the front, the drawer is generated by routes and their meta. The <a href="https://github.com/kingyue737/vitify-admin/blob/main/src/components/layout/AppDrawerItem.vue" target="_blank" rel="noreferrer">drawer item</a> is written as recursive component to support the infinite nesting of routes.</p><p>Note the drawer has already helped you to make a judgment. When a route have more than 1 child route, its corresponding drawer item will automatically become a nested one. If the number of sub-routes is exactly equal to one, that sub-route is displayed as a root route in the drawer.</p><h2 id="layout" tabindex="-1">Layout <a class="header-anchor" href="#layout" aria-hidden="true">#</a></h2><p>All the pages except login page share the same layout with navigation drawer, header and footer. This uses <code>vue-router</code> <a href="https://router.vuejs.org/guide/essentials/nested-routes.html" target="_blank" rel="noreferrer">routing nesting</a>, so in general, adding or modifying a page will only affect the main body (<code>v-main</code>). Other content in the layout, such as the header or navigation drawer will not change with your main page.</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre class="vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">/foo                                  /bar</span></span>
<span class="line"><span style="color:#dbd7caee;">+------------------+                  +-----------------+</span></span>
<span class="line"><span style="color:#dbd7caee;">| layout           |                  | layout          |</span></span>
<span class="line"><span style="color:#dbd7caee;">| +--------------+ |                  | +-------------+ |</span></span>
<span class="line"><span style="color:#dbd7caee;">| | foo.vue      | |  +------------&gt;  | | bar.vue     | |</span></span>
<span class="line"><span style="color:#dbd7caee;">| |              | |                  | |             | |</span></span>
<span class="line"><span style="color:#dbd7caee;">| +--------------+ |                  | +-------------+ |</span></span>
<span class="line"><span style="color:#dbd7caee;">+------------------+                  +-----------------+</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#393a34;">/foo                                  /bar</span></span>
<span class="line"><span style="color:#393a34;">+------------------+                  +-----------------+</span></span>
<span class="line"><span style="color:#393a34;">| layout           |                  | layout          |</span></span>
<span class="line"><span style="color:#393a34;">| +--------------+ |                  | +-------------+ |</span></span>
<span class="line"><span style="color:#393a34;">| | foo.vue      | |  +------------&gt;  | | bar.vue     | |</span></span>
<span class="line"><span style="color:#393a34;">| |              | |                  | |             | |</span></span>
<span class="line"><span style="color:#393a34;">| +--------------+ |                  | +-------------+ |</span></span>
<span class="line"><span style="color:#393a34;">+------------------+                  +-----------------+</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>With the help of <a href="https://github.com/JohnCampionJr/vite-plugin-vue-layouts" target="_blank" rel="noreferrer"><code>vite-plugin-vue-layout</code></a>, we don&#39;t need to manually add a parent layout component for every first-level route. The plugin works along with <code>vite-plugin-pages</code> and will transform the original router. If you want to change the layout for a specific page, add or modify <code>layout</code> meta in route block.</p><div class="language-html"><button class="copy"></button><span class="lang">html</span><pre class="vp-code-dark"><code><span class="line"><span style="color:#666666;">&lt;</span><span style="color:#FDAEB7;">route</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">lang</span><span style="color:#666666;">=</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">yaml</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">meta:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  layout: users</span></span>
<span class="line"><span style="color:#666666;">&lt;/</span><span style="color:#FDAEB7;">route</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="vp-code-light"><code><span class="line"><span style="color:#999999;">&lt;</span><span style="color:#B31D28;">route</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">lang</span><span style="color:#999999;">=</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">yaml</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">meta:</span></span>
<span class="line"><span style="color:#393A34;">  layout: users</span></span>
<span class="line"><span style="color:#999999;">&lt;/</span><span style="color:#B31D28;">route</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span></code></pre></div>`,20),p=[l];function t(r,c,i,y,d,u){return n(),a("div",null,p)}const D=s(o,[["render",t]]);export{h as __pageData,D as default};
